@import "~scss/_vars";

.pageMainHistory * { user-select: none; }
.pageMainHistory {
	#body { overflow: hidden; }
	#loader { position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; }

	#footer.snapLeft { right: 336px; }

	.diffAdd, .diffChange { position: relative; }
	.diffAdd::after, .diffChange::after	{ content: ""; position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; border-radius: inherit; }

	.diffAdd::after { background-color: #e5f8d6; }
	.diffChange::after { background-color: #ddf1fc; }

	#body {
		> #sideLeft { padding: 52px 0px 80px 0px; width: calc(100% - 336px); overflow-x: hidden; overflow-y: auto; position: relative; }

		> #sideRight { 
			width: 336px; z-index: 20; position: relative; background: var(--color-shape-tertiary); overflow-x: hidden; overflow-y: auto; padding: 12px; 
			display: flex; flex-direction: column; gap: 12px 0px;
		}
		> #sideRight {
			> .head { 
				display: flex; flex-direction: row; align-items: center; justify-content: space-between; -webkit-app-region: no-drag; 
				@include text-paragraph; font-weight: 600; padding: 0px 4px;
			}
			> .head {
				.name { @include text-overflow-nw; }
				.icon.close { width: 28px; height: 28px; background-size: 20px; border-radius: 6px; background-image: url('~img/icon/close.svg'); }
				.icon.close:hover { background-color: var(--color-shape-highlight-medium); }
			}

			.section { background: var(--color-bg-primary); border-radius: 10px; -webkit-app-region: no-drag; padding: 0px 0px 8px 0px; }
			.section {
				.head { display: flex; flex-direction: row; align-items: center; justify-content: space-between; padding: 12px 16px 4px 16px; }
				.head {
					.name, .date { @include text-overflow-nw; flex-grow: 1; }
					.date { color: var(--color-text-secondary); }
					.icon.arrow { width: 20px; height: 20px; background-image: url('~img/arrow/historyList.svg'); transition: none; transform: rotateZ(180deg); }
				}

				.items { display: none; transition: $transitionAllCommon; padding: 0px 4px; }
			}

			.section.isExpanded {
				.head {
					.icon.arrow { transform: none; }
				}
			}

			.item {
				.info { padding: 8px 12px; display: flex; flex-direction: column; transition: $transitionAllCommon; border-radius: 6px; }
				.info:hover { background-color: var(--color-shape-highlight-medium); }

				.author { display: flex; flex-direction: row; align-items: center; gap: 0px 6px; @include text-small; color: var(--color-text-secondary); }

				.child { padding: 3px 16px; display: flex; flex-direction: row; align-items: center; gap: 0px 12px; }
				.child {
					.bullet { width: 5px; height: 5px; background: var(--color-control-accent); border-radius: 50%; }
				}
				.child:hover, .child.active { background-color: var(--color-shape-highlight-medium); border-radius: 6px; }
			}
			.item.active { 
				.info { background-color: var(--color-shape-highlight-medium);  }
			}
		}
	}

	.blockLast { height: 100px; }
}

html.platformWindows {
	.pageMainHistory {
		#body {
			> #sideLeft, > #sideRight { overflow-y: overlay; }
		}
	}
}
